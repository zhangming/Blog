(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{575:function(t,s,e){"use strict";e.r(s);var a=e(17),o=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("p",[t._v("Event Loop ç¿»è¯‘å‡ºæ¥å°±æ˜¯äº‹ä»¶å¾ªç¯ï¼Œå¯ä»¥ç†è§£ä¸ºå®ç°å¼‚æ­¥çš„ä¸€ç§æ–¹å¼")]),t._v(" "),e("h2",{attrs:{id:"å®šä¹‰"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å®šä¹‰"}},[t._v("#")]),t._v(" å®šä¹‰")]),t._v(" "),e("hr"),t._v(" "),e("p",[t._v("æˆ‘ä»¬æ¥çœ‹çœ‹"),e("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/webappapis.html#event-loop",target:"_blank",rel:"noopener noreferrer"}},[t._v("event loop"),e("OutboundLink")],1),t._v("åœ¨HTML Standardä¸­çš„å®šä¹‰ç« èŠ‚ï¼š")]),t._v(" "),e("p",[e("code",[t._v("ä¸ºäº†åè°ƒäº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’ï¼Œè„šæœ¬ï¼Œæ¸²æŸ“ï¼Œç½‘ç»œç­‰ï¼Œç”¨æˆ·ä»£ç†å¿…é¡»ä½¿ç”¨æœ¬èŠ‚æ‰€è¿°çš„event loop")])]),t._v(" "),e("p",[e("strong",[t._v("äº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’ï¼Œè„šæœ¬ï¼Œæ¸²æŸ“ï¼Œç½‘ç»œ")]),t._v("è¿™äº›éƒ½æ˜¯æˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ä¸œè¥¿ï¼Œä»–ä»¬éƒ½æ˜¯ç”±event loopåè°ƒçš„ã€‚è§¦å‘ä¸€ä¸ªclickäº‹ä»¶ï¼Œè¿›è¡Œä¸€æ¬¡ajaxè¯·æ±‚ï¼ŒèƒŒåéƒ½æœ‰event loopåœ¨è¿ä½œã€‚")]),t._v(" "),e("h2",{attrs:{id:"task-macrotask"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#task-macrotask"}},[t._v("#")]),t._v(" task (macrotask)")]),t._v(" "),e("hr"),t._v(" "),e("p",[e("code",[t._v("ä¸€ä¸ªevent loopæœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªtaské˜Ÿåˆ—ã€‚")])]),t._v(" "),e("p",[e("code",[t._v("å½“ç”¨æˆ·ä»£ç†å®‰æ’ä¸€ä¸ªä»»åŠ¡ï¼Œå¿…é¡»å°†è¯¥ä»»åŠ¡å¢åŠ åˆ°ç›¸åº”çš„event loopçš„ä¸€ä¸ªtsaké˜Ÿåˆ—ä¸­ã€‚")])]),t._v(" "),e("p",[e("code",[t._v("æ¯ä¸€ä¸ªtaskéƒ½æ¥æºäºæŒ‡å®šçš„ä»»åŠ¡æºï¼Œæ¯”å¦‚å¯ä»¥ä¸ºé¼ æ ‡ã€é”®ç›˜äº‹ä»¶æä¾›ä¸€ä¸ªtaské˜Ÿåˆ—ï¼Œå…¶ä»–äº‹ä»¶åˆæ˜¯ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—ã€‚å¯ä»¥ä¸ºé¼ æ ‡ã€é”®ç›˜äº‹ä»¶åˆ†é…æ›´å¤šçš„æ—¶é—´ï¼Œä¿è¯äº¤äº’çš„æµç•…ã€‚")])]),t._v(" "),e("p",[t._v("taskä¹Ÿè¢«ç§°ä¸ºmacrotaskï¼Œtaské˜Ÿåˆ—è¿˜æ˜¯æ¯”è¾ƒå¥½ç†è§£çš„ï¼Œå°±æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œç”±æŒ‡å®šçš„ä»»åŠ¡æºå»æä¾›ä»»åŠ¡ã€‚")]),t._v(" "),e("h3",{attrs:{id:"å“ªäº›æ˜¯taskä»»åŠ¡æºå‘¢"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#å“ªäº›æ˜¯taskä»»åŠ¡æºå‘¢"}},[t._v("#")]),t._v(" å“ªäº›æ˜¯taskä»»åŠ¡æºå‘¢ï¼Ÿ")]),t._v(" "),e("p",[t._v("è§„èŒƒåœ¨"),e("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/webappapis.html#generic-task-sources",target:"_blank",rel:"noopener noreferrer"}},[t._v("Generic task sources"),e("OutboundLink")],1),t._v("ä¸­æœ‰æåŠï¼š")]),t._v(" "),e("blockquote",[e("p",[e("b",[t._v("DOMæ“ä½œä»»åŠ¡æºï¼š")]),e("br"),t._v(" æ­¤ä»»åŠ¡æºè¢«ç”¨æ¥ç›¸åº”domæ“ä½œï¼Œä¾‹å¦‚ä¸€ä¸ªå…ƒç´ ä»¥éé˜»å¡çš„æ–¹å¼æ’å…¥æ–‡æ¡£ã€‚")])]),t._v(" "),e("blockquote",[e("p",[e("b",[t._v("ç”¨æˆ·äº¤äº’ä»»åŠ¡æºï¼š")]),e("br"),t._v("æ­¤ä»»åŠ¡æºç”¨äºå¯¹ç”¨æˆ·äº¤äº’ä½œå‡ºååº”ï¼Œä¾‹å¦‚é”®ç›˜æˆ–é¼ æ ‡è¾“å…¥ã€‚å“åº”ç”¨æˆ·æ“ä½œçš„äº‹ä»¶ï¼ˆä¾‹å¦‚clickï¼‰å¿…é¡»ä½¿ç”¨taské˜Ÿåˆ—ã€‚")])]),t._v(" "),e("blockquote",[e("p",[e("b",[t._v("ç½‘ç»œä»»åŠ¡æºï¼š")]),e("br"),t._v("ç½‘ç»œä»»åŠ¡æºè¢«ç”¨æ¥å“åº”ç½‘ç»œæ´»åŠ¨ã€‚")])]),t._v(" "),e("blockquote",[e("p",[e("b",[t._v("history traversalä»»åŠ¡æºï¼š")]),e("br"),t._v("å½“è°ƒç”¨history.back()ç­‰ç±»ä¼¼çš„apiæ—¶ï¼Œå°†ä»»åŠ¡æ’è¿›taské˜Ÿåˆ—ã€‚")])]),t._v(" "),e("ul",[e("li",[t._v("æ€»ç»“æ¥è¯´macrotaskæœ‰:\nsetTimeoutã€setIntervalã€setImmediateã€I/Oã€UI rendering")])]),t._v(" "),e("h2",{attrs:{id:"microtask"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#microtask"}},[t._v("#")]),t._v(" microtask")]),t._v(" "),e("hr"),t._v(" "),e("p",[e("code",[t._v("æ¯ä¸€ä¸ªevent loopéƒ½æœ‰ä¸€ä¸ªmicrotaské˜Ÿåˆ—ï¼Œä¸€ä¸ªmicrotaskä¼šè¢«æ’è¿›microtaské˜Ÿåˆ—è€Œä¸æ˜¯taské˜Ÿåˆ—ã€‚")])]),t._v(" "),e("p",[e("code",[t._v("æœ‰ä¸¤ç§microtasksï¼šåˆ†åˆ«æ˜¯solitary callback microtaskså’Œcompound microtasksã€‚è§„èŒƒå€¼åªè¦†ç›–solitary callback microtasks")])]),t._v(" "),e("p",[e("code",[t._v("å¦‚æœåœ¨åˆæœŸæ‰§è¡Œæ—¶ï¼Œ")]),e("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/webappapis.html#spin-the-event-loop",target:"_blank",rel:"noopener noreferrer"}},[t._v("spin the event loop"),e("OutboundLink")],1),e("code",[t._v("ï¼Œmicrotasksæœ‰å¯èƒ½è¢«ç§»åŠ¨åˆ°å¸¸è§„çš„taské˜Ÿåˆ—ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œmicrotasksä»»åŠ¡æºä¼šè¢«taskä»»åŠ¡æºæ‰€ç”¨ã€‚é€šå¸¸æƒ…å†µï¼Œtaskä»»åŠ¡æºå’Œmicrotasksæ˜¯ä¸ç›¸å…³çš„ã€‚")])]),t._v(" "),e("p",[t._v("microtask é˜Ÿåˆ—å’Œtask(macrotask)é˜Ÿåˆ—æœ‰äº›ç›¸ä¼¼ï¼Œéƒ½æ˜¯å…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œç”±æŒ‡å®šçš„ä»»åŠ¡æºå»æä¾›ä»»åŠ¡ï¼Œä¸åŒçš„æ˜¯ä¸€ä¸ªevent loopé‡Œåªæœ‰ä¸€ä¸ªmicrotask é˜Ÿåˆ—ã€‚")]),t._v(" "),e("p",[t._v("HTML Standardæ²¡æœ‰å…·ä½“æŒ‡æ˜å“ªäº›æ˜¯microtaskä»»åŠ¡æºï¼Œé€šå¸¸è®¤ä¸ºæ˜¯microtaskä»»åŠ¡æºæœ‰:process.nextTickã€promisesã€Object.observeã€MutationObserver")]),t._v(" "),e("p",[e("b",[t._v(" NOTE: ")]),e("br")]),t._v(" "),e("p",[e("code",[t._v("Promiseçš„å®šä¹‰åœ¨ ECMAScriptè§„èŒƒè€Œä¸æ˜¯åœ¨HTMLè§„èŒƒä¸­ï¼Œä½†æ˜¯ECMAScriptè§„èŒƒä¸­æœ‰ä¸€ä¸ªjobsçš„æ¦‚å¿µå’Œmicrotaskså¾ˆç›¸ä¼¼ã€‚åœ¨Promises/A+è§„èŒƒçš„Notes 3.1ä¸­æåŠäº†promiseçš„thenæ–¹æ³•å¯ä»¥é‡‡ç”¨â€œå®ä»»åŠ¡ï¼ˆmacro-taskï¼‰â€æœºåˆ¶æˆ–è€…â€œå¾®ä»»åŠ¡ï¼ˆmicro-taskï¼‰â€æœºåˆ¶æ¥å®ç°ã€‚æ‰€ä»¥å¼€å¤´æåŠçš„promiseåœ¨ä¸åŒæµè§ˆå™¨çš„å·®å¼‚æ­£æºäºæ­¤ï¼Œæœ‰çš„æµè§ˆå™¨å°†thenæ”¾å…¥äº†macro-taské˜Ÿåˆ—ï¼Œæœ‰çš„æ”¾å…¥äº†micro-task é˜Ÿåˆ—ã€‚ä¸€ä¸ªæ™®éçš„å…±è¯†æ˜¯promiseså±äºmicrotasksé˜Ÿåˆ—ã€‚")])]),t._v(" "),e("h3",{attrs:{id:"ä¸¾ä¸ªä¾‹å­ğŸŒ°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ä¸¾ä¸ªä¾‹å­ğŸŒ°"}},[t._v("#")]),t._v(" ä¸¾ä¸ªä¾‹å­ğŸŒ°")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("\nconsole.log('script start');\n\nsetTimeout(function () {\n  console.log('setTimeout');\n}, 0);\n\nPromise.resolve()\n  .then(function () {\n    console.log('promise1');\n  })\n  .then(function () {\n    console.log('promise2');\n  });\n\nconsole.log('script end');\n\n")])])]),e("ul",[e("li",[t._v("çŒœçŒœä¸Šé¢è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœ")])]),t._v(" "),e("p",[t._v("script startã€script endã€promise1ã€promise2ã€setTimeout")]),t._v(" "),e("p",[e("img",{attrs:{src:"https://s3.bmp.ovh/imgs/2022/02/910f8b323b4b3178.gif",alt:"image.png"}})])])}),[],!1,null,null,null);s.default=o.exports}}]);